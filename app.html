<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ªù T∆∞·ªõng Online</title>
    <link rel="stylesheet" href="public/css/board.css">
    <link rel="stylesheet" href="public/css/app.css">
</head>

<body>
    <!-- App Container -->
    <div id="app">
        <!-- Header -->
        <header id="app-header">
            <div class="header-left">
                <h1>üéÆ C·ªù T∆∞·ªõng Online</h1>
            </div>
            <div class="header-center" id="user-info" style="display: none;">
                <span id="username-display"></span>
                <span id="rating-display"></span>
            </div>
            <div class="header-right">
                <button id="btn-settings" class="icon-btn" title="Settings">‚öôÔ∏è</button>
                <button id="btn-logout" class="icon-btn" style="display: none;" title="Logout">üö™</button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main id="app-main">
            <!-- Screen: Login/Register -->
            <div id="screen-auth" class="screen active">
                <div class="auth-container">
                    <div class="auth-box">
                        <h2>ƒêƒÉng Nh·∫≠p / ƒêƒÉng K√Ω</h2>

                        <div class="connection-section">
                            <h3>K·∫øt N·ªëi Server</h3>
                            <div class="input-group">
                                <label>Server:</label>
                                <input type="text" id="server-host" value="127.0.0.1" placeholder="127.0.0.1">
                            </div>
                            <div class="input-group">
                                <label>Port:</label>
                                <input type="number" id="server-port" value="9000" placeholder="9000">
                            </div>
                            <button id="btn-connect" class="btn-primary">K·∫øt N·ªëi</button>
                            <div id="connection-status" class="status-message"></div>
                        </div>

                        <div id="auth-forms" style="display: none;">
                            <div class="tabs">
                                <button class="tab-btn active" data-tab="login">ƒêƒÉng Nh·∫≠p</button>
                                <button class="tab-btn" data-tab="register">ƒêƒÉng K√Ω</button>
                            </div>

                            <!-- Login Form -->
                            <div id="tab-login" class="tab-content active">
                                <div class="input-group">
                                    <label>T√™n ƒëƒÉng nh·∫≠p:</label>
                                    <input type="text" id="login-username" placeholder="Nh·∫≠p username">
                                </div>
                                <div class="input-group">
                                    <label>M·∫≠t kh·∫©u:</label>
                                    <input type="password" id="login-password" placeholder="Nh·∫≠p password">
                                </div>
                                <button id="btn-login" class="btn-primary">ƒêƒÉng Nh·∫≠p</button>
                            </div>

                            <!-- Register Form -->
                            <div id="tab-register" class="tab-content">
                                <div class="input-group">
                                    <label>T√™n ƒëƒÉng nh·∫≠p:</label>
                                    <input type="text" id="register-username" placeholder="Nh·∫≠p username">
                                </div>
                                <div class="input-group">
                                    <label>Email:</label>
                                    <input type="email" id="register-email" placeholder="Nh·∫≠p email">
                                </div>
                                <div class="input-group">
                                    <label>M·∫≠t kh·∫©u:</label>
                                    <input type="password" id="register-password" placeholder="Nh·∫≠p password">
                                </div>
                                <div class="input-group">
                                    <label>X√°c nh·∫≠n m·∫≠t kh·∫©u:</label>
                                    <input type="password" id="register-confirm" placeholder="Nh·∫≠p l·∫°i password">
                                </div>
                                <button id="btn-register" class="btn-primary">ƒêƒÉng K√Ω</button>
                            </div>

                            <div id="auth-status" class="status-message"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen: Main Menu/Lobby -->
            <div id="screen-lobby" class="screen">
                <div class="lobby-container">
                    <div class="lobby-sidebar">
                        <div class="menu-section">
                            <h3>Menu</h3>
                            <button class="menu-btn" data-action="quick-match">‚ö° T√¨m Tr·∫≠n Nhanh</button>
                            <button class="menu-btn" data-action="ranked-match">üèÜ X·∫øp H·∫°ng</button>
                            <button class="menu-btn" data-action="create-room">üè† T·∫°o Ph√≤ng</button>
                            <button class="menu-btn" data-action="join-room">üö™ V√†o Ph√≤ng</button>
                            <button class="menu-btn" data-action="friend-challenge">üë• Th√°ch ƒê·∫•u</button>
                        </div>

                        <div class="menu-section">
                            <h3>Kh√°c</h3>
                            <button class="menu-btn" data-action="leaderboard">üìä B·∫£ng X·∫øp H·∫°ng</button>
                            <button class="menu-btn" data-action="history">üìú L·ªãch S·ª≠</button>
                            <button class="menu-btn" data-action="practice">üéØ Luy·ªán T·∫≠p</button>
                        </div>
                    </div>

                    <div class="lobby-main">
                        <div class="online-stats">
                            <span>üë• Online: <strong id="online-count">-</strong></span>
                            <span>üéÆ ƒêang ch∆°i: <strong id="playing-count">-</strong></span>
                        </div>

                        <div id="rooms-list">
                            <h3>Danh S√°ch Ph√≤ng</h3>
                            <div class="rooms-grid" id="rooms-container">
                                <!-- Rooms will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen: Room Waiting -->
            <div id="screen-room" class="screen">
                <div class="room-container">
                    <div class="room-header">
                        <h2 id="room-title">Ph√≤ng #12345</h2>
                        <button id="btn-leave-room" class="btn-danger">R·ªùi Ph√≤ng</button>
                    </div>

                    <div class="room-content">
                        <div class="players-area">
                            <div class="player-slot red-side">
                                <div class="player-avatar">üî¥</div>
                                <div class="player-info" id="red-player-info">
                                    <div class="player-name">ƒê·ª£i ng∆∞·ªùi ch∆°i...</div>
                                    <div class="player-rating">-</div>
                                    <div class="ready-status">‚ùå Ch∆∞a s·∫µn s√†ng</div>
                                </div>
                            </div>

                            <div class="vs-divider">VS</div>

                            <div class="player-slot black-side">
                                <div class="player-avatar">‚ö´</div>
                                <div class="player-info" id="black-player-info">
                                    <div class="player-name">ƒê·ª£i ng∆∞·ªùi ch∆°i...</div>
                                    <div class="player-rating">-</div>
                                    <div class="ready-status">‚ùå Ch∆∞a s·∫µn s√†ng</div>
                                </div>
                            </div>
                        </div>

                        <div class="room-settings">
                            <h3>C√†i ƒê·∫∑t Ph√≤ng</h3>
                            <div class="setting-item">
                                <label>Th·ªùi gian (ph√∫t):</label>
                                <select id="room-time">
                                    <option value="5">5 ph√∫t</option>
                                    <option value="10" selected>10 ph√∫t</option>
                                    <option value="15">15 ph√∫t</option>
                                    <option value="30">30 ph√∫t</option>
                                    <option value="0">Kh√¥ng gi·ªõi h·∫°n</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>Ch·∫ø ƒë·ªô:</label>
                                <select id="room-mode">
                                    <option value="normal" selected>Th∆∞·ªùng</option>
                                    <option value="ranked">X·∫øp h·∫°ng</option>
                                </select>
                            </div>
                        </div>

                        <div class="room-chat">
                            <h3>Chat</h3>
                            <div class="chat-messages" id="room-chat-messages">
                                <!-- Chat messages -->
                            </div>
                            <div class="chat-input">
                                <input type="text" id="room-chat-input" placeholder="Nh·∫≠p tin nh·∫Øn...">
                                <button id="btn-send-chat">G·ª≠i</button>
                            </div>
                        </div>
                    </div>

                    <div class="room-footer">
                        <button id="btn-ready-toggle" class="btn-primary btn-large">S·∫µn S√†ng</button>
                    </div>
                </div>
            </div>

            <!-- Screen: Game Board -->
            <div id="screen-game" class="screen">
                <div class="game-layout">
                    <div class="game-left">
                        <!-- Opponent Info -->
                        <div class="player-panel opponent-panel">
                            <div class="player-avatar">‚ö´</div>
                            <div class="player-details">
                                <div class="player-name" id="opponent-name">ƒê·ªëi th·ªß</div>
                                <div class="player-rating" id="opponent-rating">Rating: 1500</div>
                            </div>
                            <div class="timer-display" id="opponent-timer">10:00</div>
                        </div>

                        <!-- Chess Board -->
                        <div id="xiangqi-board"></div>

                        <!-- Current Player Info -->
                        <div class="player-panel current-panel">
                            <div class="player-avatar">üî¥</div>
                            <div class="player-details">
                                <div class="player-name" id="current-name">B·∫°n</div>
                                <div class="player-rating" id="current-rating">Rating: 1500</div>
                            </div>
                            <div class="timer-display" id="current-timer">10:00</div>
                        </div>
                    </div>

                    <div class="game-right">
                        <!-- Turn Indicator -->
                        <div class="turn-indicator" id="turn-indicator">
                            <span id="turn-text">‚è≥ L∆∞·ª£t ƒë·ªëi th·ªß</span>
                        </div>

                        <!-- Move History -->
                        <div class="move-history">
                            <h3>L·ªãch S·ª≠ N∆∞·ªõc ƒêi</h3>
                            <div class="moves-list" id="moves-list">
                                <!-- Moves will appear here -->
                            </div>
                        </div>

                        <!-- Game Chat -->
                        <div class="game-chat">
                            <h3>Chat</h3>
                            <div class="chat-messages" id="game-chat-messages">
                                <!-- Chat messages -->
                            </div>
                            <div class="chat-input">
                                <input type="text" id="game-chat-input" placeholder="Nh·∫≠p tin nh·∫Øn...">
                                <button id="btn-game-chat-send">üí¨</button>
                            </div>
                        </div>

                        <!-- Game Controls -->
                        <div class="game-controls">
                            <button id="btn-resign" class="btn-danger">üè≥Ô∏è ƒê·∫ßu H√†ng</button>
                            <button id="btn-draw-offer" class="btn-warning">ü§ù Xin H√≤a</button>
                            <button id="btn-leave-game" class="btn-secondary">üö™ R·ªùi Tr·∫≠n</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen: Leaderboard -->
            <div id="screen-leaderboard" class="screen">
                <div class="leaderboard-container">
                    <div class="leaderboard-header">
                        <h2>üìä B·∫£ng X·∫øp H·∫°ng</h2>
                        <div class="leaderboard-tabs">
                            <button class="tab-btn active" data-period="all">T·ªïng</button>
                            <button class="tab-btn" data-period="month">Th√°ng</button>
                            <button class="tab-btn" data-period="week">Tu·∫ßn</button>
                        </div>
                        <button id="btn-back-to-lobby" class="btn-secondary">‚¨ÖÔ∏è Quay L·∫°i</button>
                    </div>

                    <div class="leaderboard-content">
                        <table class="leaderboard-table">
                            <thead>
                                <tr>
                                    <th>H·∫°ng</th>
                                    <th>T√™n</th>
                                    <th>Rating</th>
                                    <th>Th·∫Øng</th>
                                    <th>Thua</th>
                                    <th>H√≤a</th>
                                    <th>T·ª∑ L·ªá</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                                <!-- Leaderboard rows -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Screen: Match History -->
            <div id="screen-history" class="screen">
                <div class="history-container">
                    <div class="history-header">
                        <h2>üìú L·ªãch S·ª≠ Tr·∫≠n ƒê·∫•u</h2>
                        <button id="btn-history-back" class="btn-secondary">‚¨ÖÔ∏è Quay L·∫°i</button>
                    </div>

                    <div class="history-filters">
                        <select id="history-filter">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="win">Th·∫Øng</option>
                            <option value="loss">Thua</option>
                            <option value="draw">H√≤a</option>
                        </select>
                        <input type="text" id="history-search" placeholder="T√¨m ƒë·ªëi th·ªß...">
                    </div>

                    <div class="history-list" id="history-list">
                        <!-- Match history items -->
                    </div>
                </div>
            </div>

            <!-- Screen: Replay -->
            <div id="screen-replay" class="screen">
                <div class="replay-container">
                    <div class="replay-header">
                        <h2 id="replay-title">üìπ Xem L·∫°i Tr·∫≠n ƒê·∫•u</h2>
                        <button id="btn-close-replay" class="btn-secondary">‚ùå ƒê√≥ng</button>
                    </div>

                    <div class="replay-content">
                        <div class="replay-board-area">
                            <div id="replay-board"></div>
                        </div>

                        <div class="replay-controls-area">
                            <div class="replay-info">
                                <div class="replay-player">
                                    <span class="red-label">üî¥</span>
                                    <span id="replay-red-name">Player 1</span>
                                </div>
                                <div class="replay-result" id="replay-result">1-0</div>
                                <div class="replay-player">
                                    <span id="replay-black-name">Player 2</span>
                                    <span class="black-label">‚ö´</span>
                                </div>
                            </div>

                            <div class="replay-timeline">
                                <button id="btn-replay-first">‚èÆÔ∏è</button>
                                <button id="btn-replay-prev">‚è™</button>
                                <button id="btn-replay-play">‚ñ∂Ô∏è</button>
                                <button id="btn-replay-next">‚è©</button>
                                <button id="btn-replay-last">‚è≠Ô∏è</button>
                            </div>

                            <div class="replay-progress">
                                <input type="range" id="replay-slider" min="0" max="100" value="0">
                                <span id="replay-move-counter">N∆∞·ªõc ƒëi: 0 / 0</span>
                            </div>

                            <div class="replay-moves">
                                <h3>N∆∞·ªõc ƒêi</h3>
                                <div class="replay-moves-list" id="replay-moves-list">
                                    <!-- Moves list -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen: Settings -->
            <div id="screen-settings" class="screen">
                <div class="settings-container">
                    <div class="settings-header">
                        <h2>‚öôÔ∏è C√†i ƒê·∫∑t</h2>
                        <button id="btn-close-settings" class="btn-secondary">‚ùå ƒê√≥ng</button>
                    </div>

                    <div class="settings-content">
                        <div class="settings-section">
                            <h3>üéÆ Tr√≤ Ch∆°i</h3>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-sound" checked>
                                    √Çm thanh
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-music" checked>
                                    Nh·∫°c n·ªÅn
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-hints" checked>
                                    Hi·ªán g·ª£i √Ω n∆∞·ªõc ƒëi
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-animations" checked>
                                    Hi·ªáu ·ª©ng di chuy·ªÉn
                                </label>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h3>üé® Giao Di·ªán</h3>
                            <div class="setting-item">
                                <label>Theme:</label>
                                <select id="setting-theme">
                                    <option value="classic">C·ªï ƒëi·ªÉn</option>
                                    <option value="modern">Hi·ªán ƒë·∫°i</option>
                                    <option value="wood">G·ªó</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>M√†u b√†n c·ªù:</label>
                                <select id="setting-board-color">
                                    <option value="beige">Be</option>
                                    <option value="green">Xanh l√°</option>
                                    <option value="brown">N√¢u</option>
                                </select>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h3>üîî Th√¥ng B√°o</h3>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-notify-turn" checked>
                                    Th√¥ng b√°o l∆∞·ª£t ƒëi
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-notify-challenge" checked>
                                    Th√¥ng b√°o th√°ch ƒë·∫•u
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-notify-message" checked>
                                    Th√¥ng b√°o tin nh·∫Øn
                                </label>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h3>üë§ T√†i Kho·∫£n</h3>
                            <button id="btn-change-password" class="btn-primary">ƒê·ªïi M·∫≠t Kh·∫©u</button>
                            <button id="btn-delete-account" class="btn-danger">X√≥a T√†i Kho·∫£n</button>
                        </div>

                        <div class="settings-section">
                            <h3>‚ÑπÔ∏è Th√¥ng Tin</h3>
                            <p>Phi√™n b·∫£n: 1.0.0</p>
                            <p>Server: <span id="settings-server-info">-</span></p>
                            <button id="btn-about">Gi·ªõi Thi·ªáu</button>
                            <button id="btn-rules">Lu·∫≠t Ch∆°i</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Modal: Game Result -->
        <div id="modal-result" class="modal">
            <div class="modal-content result-modal">
                <div class="result-header" id="result-header">
                    <h2 id="result-title">üèÜ Chi·∫øn Th·∫Øng!</h2>
                </div>
                <div class="result-body">
                    <div class="result-stats">
                        <div class="stat-item">
                            <span class="stat-label">K·∫øt qu·∫£:</span>
                            <span class="stat-value" id="result-outcome">1-0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">S·ªë n∆∞·ªõc ƒëi:</span>
                            <span class="stat-value" id="result-moves">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Th·ªùi gian:</span>
                            <span class="stat-value" id="result-time">10:00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Rating thay ƒë·ªïi:</span>
                            <span class="stat-value" id="result-rating-change">+15</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Rating m·ªõi:</span>
                            <span class="stat-value" id="result-new-rating">1515</span>
                        </div>
                    </div>
                </div>
                <div class="result-footer">
                    <button id="btn-result-replay" class="btn-primary">üìπ Xem L·∫°i</button>
                    <button id="btn-result-rematch" class="btn-secondary">üîÑ ƒê·∫•u L·∫°i</button>
                    <button id="btn-result-lobby" class="btn-secondary">üè† V·ªÅ Lobby</button>
                </div>
            </div>
        </div>

        <!-- Modal: Draw Offer -->
        <div id="modal-draw" class="modal">
            <div class="modal-content">
                <h3>ü§ù ƒê·ªëi th·ªß xin h√≤a</h3>
                <p>ƒê·ªëi th·ªß ƒë·ªÅ ngh·ªã h√≤a. B·∫°n c√≥ ƒë·ªìng √Ω kh√¥ng?</p>
                <div class="modal-buttons">
                    <button id="btn-draw-accept" class="btn-primary">ƒê·ªìng √ù</button>
                    <button id="btn-draw-decline" class="btn-danger">T·ª´ Ch·ªëi</button>
                </div>
            </div>
        </div>

        <!-- Modal: Challenge -->
        <div id="modal-challenge" class="modal">
            <div class="modal-content">
                <h3>‚öîÔ∏è L·ªùi Th√°ch ƒê·∫•u</h3>
                <p><strong id="challenge-from">Player</strong> m·ªùi b·∫°n ƒë·∫•u!</p>
                <div class="modal-buttons">
                    <button id="btn-challenge-accept" class="btn-primary">Ch·∫•p Nh·∫≠n</button>
                    <button id="btn-challenge-decline" class="btn-danger">T·ª´ Ch·ªëi</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load Scripts -->
    <script type="module" src="src/app/app.js"></script>
</body>

</html>